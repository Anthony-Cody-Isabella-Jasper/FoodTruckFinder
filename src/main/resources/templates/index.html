<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>FoodTruckFinder</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js"></script>

    <link rel="stylesheet" th:href="@{/main.css}">
</head>
<body>

<!-- ADD CONDITIONAL FOR LOGGED OR NOT LOGGED-->
<nav th:replace="partials :: loggedNav"></nav>


<div id="map">
    Add Map from API
</div>


<div class="input-group mb-3">
    <div class="input-group-prepend">
        <span class="input-group-text" id="truckSearch">Add magnifying glass icon</span>
    </div>
    <input type="text" class="form-control" placeholder="Search for FoodTruck" aria-label="Search"
           aria-describedby="truckSearch">
</div>

<div>
    <div>
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown" aria-expanded="false">
                Cuisine Filter
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Cuisine1</a>
                <a class="dropdown-item" href="#">Cuisine2</a>
                <a class="dropdown-item" href="#">Cuisine3</a>
            </div>
        </div>

        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="vegetarian" id="vegetarian">
            <label class="form-check-label" for="vegetarian">
                Vegetarian
            </label>
        </div>

        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="vegan" id="vegan">
            <label class="form-check-label" for="vegan">
                Vegan
            </label>
        </div>
    </div>
</div>

<div class="row">
    <!--    "FOR EACH" FOR TRUCKS-->
    <div th:each="truck : ${trucks}" class="card">
        <!--        TRUCK IMAGE-->
        <img th:attr="src=${truck.profile_picture}" class="card-img-top" alt="...">
        <div class="card-body">
            <a th:href="@{/truck/{id}/show(id=${truck.id})}"><h5 class="truck-name"><span th:text="${truck.name}"></span></h5></a>
            <p class="truck-cuisine" th:each="cuisine : ${truck.cuisines}">Truck Cuisines: <span th:text="${cuisine.name}"></span></p>
            <a href="#" class="btn btn-primary">Truck location</a>
            <p>averaged rating goes here</p>
        </div>
    </div>
</div>

<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiaG9kZ2VzY29keTAwIiwiYSI6ImNreXVtOG5odDFvc2EycHBlaHhpMzF1c3QifQ.6g0ZKujuRweI-lJkBKuWAQ';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/streets-v11', // style URL
        center: [-74.5, 40], // starting position [lng, lat]
        zoom: 9 // starting zoom
    });
</script>

<footer th:replace="partials :: footer"></footer>